(this.webpackJsonptracker=this.webpackJsonptracker||[]).push([[0],{207:function(e,t,n){e.exports=n(390)},212:function(e,t,n){},215:function(e,t,n){},359:function(e,t,n){},390:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5),c=n.n(i),s=(n(212),n(75)),l=n(60),o=n(3),u=n.n(o),m=n(10),d=n(4),f=n(395),p=n(396),v=n(16),h=n(53),b=n(116),E=n(104),g=n(118),y=n(173),j=function e(t,n,a){Object(h.a)(this,e),this.id=void 0,this.timestamp=void 0,this.name=void 0,this.name=t,a&&(this.id=a),this.timestamp=n||(new Date).toISOString()},O=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.units.get({name:n});case 2:if(!(a=e.sent)||!a.id){e.next=5;break}return e.abrupt("return",a.id);case 5:return r=(new Date).toISOString(),e.next=8,t.units.add({name:n,timestamp:r});case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(105),x=function(){function e(t,n){Object(h.a)(this,e),this.id=void 0,this.unitId=void 0,this.unitName=void 0,this.unit=void 0,this.records=void 0,t&&(this.id=t),n&&(this.unitId=n)}return Object(w.a)(e,[{key:"loadSeriesData",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.id&&this.unitId){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all([k.units.where("id").equals(this.unitId).first(),k.records.where("seriesId").equals(this.id).toArray()]);case 4:return t=e.sent,n=Object(d.a)(t,2),this.unit=n[0],this.records=n[1],e.abrupt("return",this.records||[]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=new(function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this,"TrackerDatabase"))).series=void 0,e.units=void 0,e.records=void 0,e.version(1).stores({series:"++id, timestamp, name",units:"++id, timestamp, name",records:"++id, timestamp, seriesId, amount"}),e.series=e.table("series"),e.units=e.table("units"),e.records=e.table("records"),e.series.mapToClass(x),e.units.mapToClass(j),e}return Object(g.a)(t,e),t}(y.a)),S=n(174),C=n(29),I=n(88),N=n(391),F=n(398),T=n(30),D=n(143),A=n.n(D),W=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(),l=Object(d.a)(s,2),o=l[0],u=l[1];return A.a.Animate.registerAnimation("lineUpdate",(function(e,t){for(var n=e.get("cacheShape").attrs,a=n.points,r=e.attr("points"),i=a.length,c=r.length-i,s=r[r.length-1],l=0;l<c;l++)a.push(s);e.attr(n),e.animate().to({attrs:{points:r},duration:2e3,easing:t.easing})})),Object(a.useEffect)((function(){if(!o){var t=new A.a.Chart({id:"mountNode",pixelRatio:window.devicePixelRatio}),n=e.lineColor?e.lineColor:"#fff",a=e.records.map((function(e){return Object(T.a)({},e,{amount:Number(e.amount)})}));c(a),t.source(a,{timestamp:{type:"timeCat",mask:"MM/DD",tickCount:3,range:[0,1]},amount:{tickCount:5,min:0,alias:"amount"}}),t.axis("time",{label:function(e,t,n){var a={};return 0===t?a.textAlign="left":t===n-1&&(a.textAlign="right"),a}}),t.tooltip({showCrosshairs:!0}),t.line().position("timestamp*amount").shape("smooth").animate({update:{animation:"lineUpdate"}}).color(n).style({lineWidth:3}),t.point().position("timestamp*amount").shape("smooth").style({stroke:n,fill:n,lineWidth:1}),t.render(),u(t)}}),[e.lineColor,e.records,o]),Object(a.useEffect)((function(){!function(e){var t=Object(T.a)({},e,{amount:Number(e.amount)});c((function(e){return[].concat(Object(C.a)(e),[t])}))}(e.records[e.records.length-1])}),[e.records]),r.a.createElement("div",{id:"container",style:{display:"flex",justifyContent:"center"}},r.a.createElement("canvas",{id:"mountNode",height:e.height,width:e.width}),o&&i?o.changeData(i):null)},z=(n(215),f.a.Title),L=function(e){return new Promise((function(t){return setTimeout(t,e)}))},B=[.5,4,1.5,7],P=function(e){var t=p.a.useForm(),n=Object(d.a)(t,1)[0],i=Object(a.useState)(),c=Object(d.a)(i,2)[1],s=Object(a.useState)(!1),l=Object(d.a)(s,2),o=l[0],h=l[1],b=Object(a.useState)([]),E=Object(d.a)(b,2),g=E[0],y=E[1],j=Object(a.useState)(0),O=Object(d.a)(j,2),w=O[0],x=O[1],k=Object(a.useState)(!1),T=Object(d.a)(k,2),D=T[0],A=T[1],P=function(e,t){var n=new Date;n.setDate(n.getDate()+t);var a={id:t,seriesId:1,timestamp:n.toISOString(),amount:e};y((function(e){return[].concat(Object(C.a)(e),[a])})),x(t+1)};Object(a.useEffect)((function(){c({});var t,a=void 0,r=e.values&&e.values.length>=1?e.values:B;if(!0===e.animated){var i=Object(S.a)(r),s=i[0],l=i.slice(1);P(s,0),a=l.map((t=4e3,function(e,a){return setTimeout(Object(m.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a+1,n.setFieldsValue({amount:e}),t.next=4,L(800);case 4:return h(!0),P(e,r),t.next=8,L(600);case 8:n.setFieldsValue({amount:void 0}),h(!1);case 10:case"end":return t.stop()}}),t)}))),t*(a+1))}));var o=4e3*r.length;a.push(setInterval((function(){return A(!0)}),o))}else r.map(P);return function(){a&&a.map(clearInterval)}}),[n,e.animated,e.values]);return r.a.createElement(r.a.Fragment,null,e.showForm?r.a.createElement(p.a,{form:n,name:"demo_flow",layout:"inline",style:{display:"flex",justifyContent:"center"},onFinish:function(e){e.amount&&(P(Number(e.amount),w),n.resetFields(),A(!1))}},r.a.createElement(p.a.Item,{name:"seriesName",style:{margin:"0 8px"}},r.a.createElement(I.a,{size:"small",style:{maxWidth:160,minWidth:120},bordered:!1,defaultValue:"running",options:[{label:"running",value:"1"}],optionFilterProp:"children"})),r.a.createElement(N.a,{content:"Try me!",visible:D},r.a.createElement(p.a.Item,{name:"amount",rules:[{required:!0,message:"required"}],style:{maxWidth:70,margin:"0 8px"}},r.a.createElement(F.a,{type:"number",size:"small",placeholder:"miles"}))),r.a.createElement(p.a.Item,{shouldUpdate:!0,style:{margin:"0 8px"}},(function(){return r.a.createElement(v.a,{size:"small",type:"primary",shape:"round",htmlType:"submit",loading:o,disabled:o||!Boolean(n.getFieldValue("amount"))},"Log")}))):null,g&&g.length>=1?r.a.createElement("div",{id:"overlay-container"},r.a.createElement(W,{records:g,height:e.height,width:e.width,lineColor:e.lineColor}),e.overlay?r.a.createElement("div",{id:"overlay",className:"overlay-flex-container"},r.a.createElement(f.a,null,r.a.createElement(z,{level:4,style:{color:e.overlayColor}},e.overlay))):null):null)};function R(e){var t=e.name,n=e.id;return{label:t,value:Number(n)}}var q=function(e,t){var n=(new Date).toISOString(),a="".concat(e,"_").concat(n,".json"),r=new Blob([JSON.stringify(t,void 0,2)],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=a,i.click()},U=[["running","miles"],["coffee consumption","cups"],["pushups","reps"],["alcohol","drinks"],["meditation","minutes"],["snacks eaten","serving"],["anerobic exercise","minutes"],["TV watched","hours"],["walking","miles"]],V=function(){var e=Object(a.useState)(U[0][0]),t=Object(d.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(U[0][1]),s=Object(d.a)(c,2),l=s[0],o=s[1];return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n&&n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){!function(e){var t=e.findIndex((function(e){return e[0]===n}))+1;if(t>=e.length)return i(e[0][0]),void o(e[0][1]);var a=e[t];i(a[0]),o(a[1])}(U)}),3e3),r.a.createElement(a.Fragment,null,r.a.createElement(p.a.Item,{name:"seriesName",rules:[{required:!0,message:"Please input something"}],style:{width:110,margin:"0 8px"}},r.a.createElement(F.a,{size:"small",placeholder:n})),r.a.createElement(p.a.Item,{name:"unitName",rules:[{required:!0,message:"Please input something"}],style:{width:90,margin:"0 8px"}},r.a.createElement(F.a,{size:"small",placeholder:l})))},_=(n(359),f.a.Title),M=function(){var e=p.a.useForm(),t=Object(d.a)(e,1)[0],n=Object(l.f)(),i=Object(a.useState)(),c=Object(d.a)(i,2)[1],o=Object(a.useState)([]),h=Object(d.a)(o,2),b=h[0],E=h[1],g=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.series.toArray();case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){c({}),g()}),[]);var y=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.seriesName&&t.unitName){e.next=2;break}return e.abrupt("return");case 2:return a=t.unitName.toLocaleLowerCase(),e.next=5,O(k,a);case 5:return r=e.sent,i={name:t.seriesName.toLocaleLowerCase(),timestamp:(new Date).toISOString(),unitId:r},e.next=9,k.series.add(i);case 9:c=e.sent,n.push("/".concat(c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement(f.a,null,r.a.createElement("div",{className:"indent"},r.a.createElement(_,{level:2,style:{marginBottom:"0.2em"}},"simple habit tracking")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{display:"block",justifyContent:"left"}},r.a.createElement("div",null,r.a.createElement("span",{className:"emoji",role:"img","aria-label":"woman scientist"},"\ud83d\udc69\u200d\ud83d\udd2c")," ","decide what you want to track"),r.a.createElement("div",null,r.a.createElement("span",{className:"emoji",role:"img","aria-label":"clipboard"},"\ud83d\udccb")," ","use this app to log data"),r.a.createElement("div",null,r.a.createElement("span",{className:"emoji",role:"img","aria-label":"chart upwards"},"\ud83d\udcc8")," ","see charts about your behavior"))))),r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement("div",{className:"indent"},r.a.createElement(f.a,null,r.a.createElement(_,{level:2,style:{marginBottom:"0.2em"}},"log data, see trends"),r.a.createElement("div",{className:"indent"},r.a.createElement(_,{level:4},"looks like this:")))),r.a.createElement("div",{style:{minHeight:200,paddingRight:"2em"}},r.a.createElement(P,{height:170,width:.8*window.innerWidth,showForm:!0,animated:!0,lineColor:"rgba(6, 85, 231, .6)",overlay:"DEMO",overlayColor:"rgba(240, 240, 240, .3)"}))),r.a.createElement("div",{style:{margin:"1em 0"}},r.a.createElement("div",{className:"indent"},r.a.createElement(f.a,null,r.a.createElement(_,{level:2,style:{marginBottom:"0.2em"}},"get started"),r.a.createElement("div",{className:"indent"},r.a.createElement(_,{level:4},"what do you want to track?")))),r.a.createElement(p.a,{form:t,name:"landing_series_creation",layout:"inline",style:{display:"flex",justifyContent:"center"},onFinish:y},r.a.createElement(V,null),r.a.createElement(p.a.Item,{shouldUpdate:!0,style:{margin:"0 8px"}},(function(){return r.a.createElement(v.a,{type:"primary",htmlType:"submit",size:"small",shape:"round",disabled:!t.isFieldsTouched(!0)||Boolean(t.getFieldsError().filter((function(e){return e.errors.length})).length)},"Start")})))),b&&b[0]&&b[0].id?r.a.createElement("div",{style:{marginTop:24,display:"flex",justifyContent:"center"}},r.a.createElement(v.a,{type:"primary",ghost:!0,style:{width:"70%"}},r.a.createElement(s.b,{to:"/".concat(b[0].id)},"Go to your records"))):null)},J=n(202),H=n(392),G=n(399),K=F.a.Search,$=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),f=o[0],v=o[1],h=Object(a.useState)(),b=Object(d.a)(h,2),E=b[0],g=b[1],y=Object(a.useState)(),j=Object(d.a)(y,2),O=j[0],w=j[1],x=Object(l.f)();Object(a.useEffect)((function(){e.activeSeries&&(g(void 0),e.form.resetFields(),S(e.activeSeries))}),[e.activeSeries,e.form]);var S=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.series.toArray();case 2:n=e.sent,c(n),a=n.map(R),(r=n.find((function(e){return e.id===t})))&&g(r),v(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var N=function(e){w(e.target.value)},F=function(){var t=Object(m.a)(u.a.mark((function t(){var n,a,r,s,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=14;break}return n=(new Date).toISOString(),a=String(O).toLocaleLowerCase(),t.next=5,k.series.add({name:a,timestamp:n});case 5:r=t.sent,s=[].concat(Object(C.a)(i),[{id:r,name:a,timestamp:n}]),c(s),l=s.map(R),v(l),g({id:r,name:a,timestamp:n}),w(void 0),e.form.setFieldsValue({seriesId:r}),x.push("/".concat(r));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f&&f.length>=1?r.a.createElement(p.a.Item,{name:"seriesId",style:{margin:"0 4px 0 0"}},r.a.createElement(I.a,{size:"small",style:{width:e.width},bordered:!1,onChange:function(e){x.push("/".concat(e))},options:f,value:String(null===E||void 0===E?void 0:E.id),defaultValue:String(null===E||void 0===E?void 0:E.name),dropdownRender:function(e){return r.a.createElement("div",null,e,r.a.createElement(H.a,{style:{margin:"4px 0"}}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(K,{size:"small",value:O,onChange:N,placeholder:"meditation",onPressEnter:F,onSearch:F,enterButton:r.a.createElement(G.a,null)})))}})):r.a.createElement("div",{style:{width:e.width}})},Q=F.a.Search,X=function(e){var t=Object(a.useState)(),n=Object(d.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)([]),l=Object(d.a)(s,2),o=l[0],f=l[1],v=Object(a.useState)([]),h=Object(d.a)(v,2),b=h[0],E=h[1];Object(a.useEffect)((function(){g()}),[]);var g=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.units.toArray();case 2:t=e.sent,n=t.map(R),E(t),f(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){c(e.target.value)},j=function(){var t=Object(m.a)(u.a.mark((function t(){var n,a,r,s,l,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=13;break}return n=(new Date).toISOString(),a={name:String(i).toLocaleLowerCase(),timestamp:n},t.next=5,k.units.add(a);case 5:r=t.sent,s=Object(T.a)({},a,{id:r}),l=[].concat(Object(C.a)(b),[s]),o=l.map(R),E(l),f(o),c(void 0),e.selectionComplete(s);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(p.a.Item,{name:"unit",rules:[{required:!0,message:"Please choose a unit"}],style:{margin:"0 4px"}},r.a.createElement(I.a,{size:"small",style:{width:e.width},placeholder:"unit",onChange:function(t){var n=b.find((function(e){return e.id===t}));n&&e.selectionComplete(Object(T.a)({},n,{id:t}))},dropdownRender:function(e){return r.a.createElement("div",null,e,r.a.createElement(H.a,{style:{margin:"4px 0"}}),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(Q,{size:"small",value:i,onChange:y,placeholder:"session",onPressEnter:j,onSearch:j,enterButton:r.a.createElement(G.a,null)})))},options:o}))},Y=n(397),Z=n(400),ee=n(401),te=n(402),ne=f.a.Title,ae=f.a.Text,re=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),i=n[0],c=n[1],s=function(e){return function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.units.toArray();case 2:return n=e.sent,e.next=5,k.series.toArray();case 5:return a=e.sent,e.next=8,k.records.toArray();case 8:r=e.sent,q("full-data-export",{units:n,series:a,records:r});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(e,t,n){return function(){var e=Object(m.a)(u.a.mark((function e(a){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,!t.unitId){e.next=5;break}return e.next=4,k.units.where("id").equals(t.unitId).first();case 4:r=e.sent;case 5:i={series:t,records:n,unit:r},q(t.name,i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o={style:{margin:"4px"},type:"primary",size:"small",shape:"round"};return r.a.createElement("div",null,r.a.createElement(Z.a,{style:{fontSize:22},onClick:function(){return c(!0)}}),r.a.createElement(Y.a,{title:r.a.createElement(ne,{level:4,style:{margin:0}},"export data"),visible:i,onCancel:function(){return c(!1)},footer:null},r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(ne,{level:4,style:{margin:0}},"all your data"),r.a.createElement(ae,{className:"indent"},"export as:")),r.a.createElement("div",{className:"indent"},r.a.createElement("div",{className:"indent"},r.a.createElement(v.a,Object.assign({type:"primary"},o,{onClick:s(),icon:r.a.createElement(ee.a,null)}),"json"),r.a.createElement(v.a,Object.assign({type:"primary"},o,{onClick:s(),icon:r.a.createElement(te.a,null),disabled:!0}),"spreadsheet")))),e.series&&e.records?r.a.createElement("div",{style:{marginTop:16}},r.a.createElement(f.a,null,r.a.createElement(ne,{level:4,style:{margin:0}},e.series.name," data"),r.a.createElement(ae,{className:"indent"},"export as:")),r.a.createElement("div",{className:"indent"},r.a.createElement("div",{className:"indent"},r.a.createElement(v.a,Object.assign({type:"primary"},o,{onClick:l(0,e.series,e.records),icon:r.a.createElement(ee.a,null)}),"json"),r.a.createElement(v.a,Object.assign({type:"primary"},o,{onClick:l(0,e.series,e.records),icon:r.a.createElement(te.a,null),disabled:!0}),"spreadsheet")))):null))},ie=n(393),ce=n(404),se=n(405),le=n(403),oe=n(394),ue=n(107),me=n(119),de=r.a.createContext(void 0),fe=function(e){e.index;var t=Object(me.a)(e,["index"]),n=p.a.useForm(),a=Object(d.a)(n,1)[0];return r.a.createElement(p.a,{form:a,component:!1},r.a.createElement(de.Provider,{value:a},r.a.createElement("tr",t)))},pe=function(e){e.title;var t=e.editable,n=e.children,i=e.dataIndex,c=e.record,s=e.handleSave,l=Object(me.a)(e,["title","editable","children","dataIndex","record","handleSave"]),o=Object(a.useState)(!1),f=Object(d.a)(o,2),v=f[0],h=f[1],b=Object(a.useRef)(null),E=Object(a.useContext)(de);Object(a.useEffect)((function(){v&&b&&b.current&&b.current.focus()}),[v]);var g=function(){h(!v),E.setFieldsValue(Object(ue.a)({},i,c[i]))},y=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.validateFields();case 3:n=e.sent,g(),s(Object(T.a)({},c,{},n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),j=n;return t&&(j=v?r.a.createElement(p.a.Item,{style:{margin:0,maxWidth:50},name:i,rules:[{required:!0,message:"\u270f\u261d"}]},r.a.createElement(F.a,{ref:b,onPressEnter:y,onBlur:y})):r.a.createElement("div",{className:"editable-cell-value-wrap",onClick:g},n)),r.a.createElement("td",l,j)},ve=function(e){return new Date(e).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},he=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(E.a)(t).call(this,e))).columns=void 0,n.handleDelete=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.records.delete(t);case 2:a=Object(C.a)(n.state.records),n.setState({records:a.filter((function(e){return e.id!==t}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSave=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.records.update(t.id,{amount:t.amount});case 2:a=Object(C.a)(n.state.records),r=a.findIndex((function(e){return t.id===e.id})),i=a[r],a.splice(r,1,Object(T.a)({},i,{},t)),n.setState({records:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.columns=[{title:"timestamp",dataIndex:"timestamp",render:ve},{title:"amount",dataIndex:"amount",editable:!0},{title:"",dataIndex:"operation",align:"center",render:function(e,t){return r.a.createElement(ie.a,{title:"Are you sure?",onConfirm:function(){return n.handleDelete(t.id)}},r.a.createElement(le.a,{className:"danger",style:{fontSize:18,color:"#ff4d4f"}}))}}],n.state={records:[],count:0},n}return Object(g.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.records.map((function(e){return Object(T.a)({},e,{id:Number(e.id)})}));this.setState((function(){return{records:e,count:e.length}}))}},{key:"render",value:function(){var e=this,t=this.state.records,n={body:{row:fe,cell:pe}},a=this.columns.map((function(t){return t.editable?Object(T.a)({},t,{onCell:function(n){return{record:n,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return r.a.createElement(oe.a,{size:"small",components:n,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,rowKey:"id",columns:a})}}]),t}(a.Component),be=f.a.Title,Ee=f.a.Text,ge=function(e){var t,n=Object(a.useState)(!1),i=Object(d.a)(n,2),c=i[0],s=i[1],l=function(){e.onClose&&e.onClose(),s(!1)},o={style:{margin:"4px"},danger:!0,size:"small",shape:"round"};return r.a.createElement("div",null,r.a.createElement(ce.a,{style:{fontSize:22},onClick:function(){return s(!0)}}),r.a.createElement(Y.a,{title:r.a.createElement(be,{level:4,style:{margin:0}},"manage ",e.series.name," data"),visible:c,onCancel:l,footer:null,style:{top:20}},r.a.createElement("div",null,e.records&&e.records.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(be,{level:4},"edit/delete records")),r.a.createElement(he,{series:e.series,records:e.records})),r.a.createElement(H.a,{style:{marginTop:0}}),r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(be,{level:4,style:{margin:0}},"clear all records"),r.a.createElement(Ee,{className:"indent"},"erase records, start fresh")),r.a.createElement("div",{className:"indent"},r.a.createElement("div",{className:"indent"},r.a.createElement(ie.a,{title:"Are you sure?",onConfirm:(t=e.series,function(){var e=Object(m.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k.records.where("seriesId").equals(t.id).delete();case 4:l();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.a.createElement(v.a,Object.assign({className:"indent"},o,{icon:r.a.createElement(se.a,null)}),"delete records"))))),r.a.createElement(H.a,{style:{margin:"16px 0"}})):null,r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(be,{level:4,style:{margin:0}},"stop tracking ",e.series.name),r.a.createElement(Ee,{className:"indent"},"erase ",e.series.name," and any records you've created")),r.a.createElement("div",{className:"indent"},r.a.createElement("div",{className:"indent"},r.a.createElement(ie.a,{title:"Are you sure?",onConfirm:function(e){return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,k.records.where("seriesId").equals(e.id).delete();case 4:return t.next=6,k.series.delete(e.id);case 6:l();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e.series)},r.a.createElement(v.a,Object.assign({},o,{icon:r.a.createElement(le.a,null)}),"delete ",e.series.name))))))))},ye=f.a.Title,je=function(){var e=Object(a.useRef)(null),t=p.a.useForm(),n=Object(d.a)(t,1)[0],i=Object(a.useState)(),c=Object(d.a)(i,2)[1],s=Object(a.useState)(!0),o=Object(d.a)(s,2),h=o[0],b=o[1],E=Object(a.useState)(),g=Object(d.a)(E,2),y=g[0],j=g[1],O=Object(a.useState)([]),w=Object(d.a)(O,2),S=w[0],I=w[1],N=Object(a.useState)(),D=Object(d.a)(N,2),A=D[0],z=D[1],L=Object(l.g)().id,B=Object(l.f)(),R=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(t),n=new x(t.id,t.unitId),e.next=4,n.loadSeriesData();case 4:a=e.sent,n.unit&&z(n.unit.name),b(!1),a.reduce((function(e,t){return e=[].concat(Object(C.a)(e),[t]),I(e),e}),[]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){I([]),j(void 0),z(void 0),b(!0),c({})};Object(a.useEffect)((function(){var e=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.series.toArray();case 2:(t=e.sent)&&t[0]?t[0]&&t[0].id&&(n=t[0].id,B.push("/".concat(n))):B.push("/landing");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var t=Object(m.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n||""===n){t.next=9;break}return t.next=3,k.series.get(Number(n));case 3:if(!(a=t.sent)){t.next=9;break}return q(),t.next=8,R(a);case 8:return t.abrupt("return",t.sent);case 9:return t.next=11,e();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(L)}),[L,B]);var U=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.amount){e.next=2;break}return e.abrupt("return");case 2:return a={seriesId:Number(L),timestamp:(new Date).toISOString(),amount:t.amount},e.next=5,k.records.add(a);case 5:r=e.sent,i=[].concat(Object(C.a)(S),[Object(T.a)({id:r},a)]),I(i),n.resetFields();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var t=Object(m.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.name,r=n.id,t.next=3,k.series.update(Number(L),{unitId:r});case 3:z(a),e&&e.current&&e.current.focus();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{style:{paddingTop:"1em"}},r.a.createElement(J.a,{spinning:h,style:{minHeight:240}},r.a.createElement(p.a,{form:n,name:"new_record",layout:"inline",onFinish:U,style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},y?r.a.createElement($,{width:140,activeSeries:y.id,form:n}):r.a.createElement("div",{style:{width:140}}),A?r.a.createElement(p.a.Item,{name:"amount",rules:[{required:!0,message:"needs value"}],style:{maxWidth:110,margin:"0 4px"}},r.a.createElement(F.a,{type:"number",size:"small",ref:e,suffix:A})):r.a.createElement(X,{width:110,selectionComplete:V}),r.a.createElement(p.a.Item,{shouldUpdate:!0,style:{margin:"0 4px"}},(function(){return r.a.createElement(v.a,{type:"primary",htmlType:"submit",size:"small",shape:"round",disabled:!Boolean(n.getFieldValue("amount"))||Boolean(n.getFieldsError().filter((function(e){return e.errors.length})).length)},"Log")}))),y?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a.Item,{style:{margin:"0"}},r.a.createElement(ge,{series:y,records:S,onClose:function(){var e=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.series.toArray();case 2:(t=e.sent)&&t[0]?t[0]&&t[0].id&&(n=t[0].id,B.push("/".concat(n))):B.push("/landing");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var t=Object(m.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n||""===n){t.next=9;break}return t.next=3,k.series.get(Number(n));case 3:if(!(a=t.sent)){t.next=9;break}return q(),t.next=8,R(a);case 8:return t.abrupt("return",t.sent);case 9:return t.next=11,e();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(L)}})),r.a.createElement(p.a.Item,{style:{margin:"0"}},r.a.createElement(re,{series:y,records:S}))):null),r.a.createElement("div",null,S&&S.length>=1?r.a.createElement("div",{id:"overlay-container"},r.a.createElement(W,{records:S,height:190,width:.95*window.innerWidth,lineColor:"rgba(6, 85, 231, .8)"}),1===S.length?r.a.createElement("div",{id:"overlay"},r.a.createElement(f.a,null,r.a.createElement(ye,{level:4,style:{color:"rgba(240, 240, 240, .8)",position:"relative",top:24,left:56}},r.a.createElement("span",{role:"img","aria-label":"finger pointing"},"\ud83d\udc48")," nice."),r.a.createElement(ye,{level:4,style:{color:"rgba(240, 240, 240, .8)",position:"relative",top:16,left:80}},"add another to see a trend"))):null):h?null:r.a.createElement(P,{width:.95*window.innerWidth,height:190,animated:!1,lineColor:"rgba(240, 240, 240, .1)",overlay:"start your chart \u261d!",overlayColor:"rgba(240, 240, 240, .8)"}))))};var Oe=function(){return r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/landing"},r.a.createElement(M,null)),r.a.createElement(l.a,{path:"/:id?"},r.a.createElement(je,null))))},we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(Oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");we?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):xe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):xe(t,e)}))}}()}},[[207,1,2]]]);
//# sourceMappingURL=main.680c27ea.chunk.js.map